/*! odata-array-filter - v0.0.1 - https://github.com/jasongardnerlv/odata-array-filter - (c) 2016 Jason Gardner - licensed MIT */
ODataArrayFilter=function(){"use strict";function a(a){return"$"!==a.charAt(0)&&(a="$filter="+a),ODataParser.parse(a)}function b(a,b,c){return"date"===Object.toType(b)?c(new Date(a).getTime(),b.getTime()):c(a,b)}function c(a){if(!a.type)throw new Error("could not find the field type");if("property"===a.type)return a.name;if("functioncall"!==a.type)throw new Error("unrecognized type: "+a.type);switch(a.func){case"tolower":case"toupper":return c(a.args[0]);case"substringof":return c(a.args[1]);default:throw new Error("unrecognized functioncall func: "+a.func)}}function d(a,b){if(null!==b&&a.type&&"functioncall"===a.type)switch(a.func){case"tolower":return b.toLowerCase();case"toupper":return b.toUpperCase();case"substringof":return b=d(a.args[1],b),b.indexOf(a.args[0].value)>=0}return b}function e(a,b){switch(a.type){case"eq":case"ne":case"lt":case"le":case"gt":case"ge":var e=c(a.left),f=Array.isArray(a.right.value)?a.right.value[0]:a.right.value;return b.filter(function(b){var c=d(a.left,b[e]);return h[a.type+"Evaluator"](c,f)})}}function f(a,b){return a.$filter&&(b=e(a.$filter,b)),b}function g(){var b=this;b.parse=function(b){return a(b)},b.filter=function(a,b){return f(a,b)},b.parseAndFilter=function(a,c){return b.filter(b.parse(a),c)}}Object.toType=function(a){return function(b){return b===a?"global":{}.toString.call(b).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}}(this);var h={eqEvaluator:function(a,c){return null===a?"string"==typeof c&&"null"===c.toLowerCase():b(a,c,function(a,b){return a===b})},neEvaluator:function(a,b){return h.eqEvaluator(a,b)===!1},ltEvaluator:function(a,c){return null!==a&&b(a,c,function(a,b){return a<b})},leEvaluator:function(a,c){return null!==a&&b(a,c,function(a,b){return a<=b})},gtEvaluator:function(a,c){return null!==a&&b(a,c,function(a,b){return a>b})},geEvaluator:function(a,c){return null!==a&&b(a,c,function(a,b){return a>=b})}};return new g}();